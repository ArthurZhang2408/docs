---
title: Mean Reciprocal Rank Reranker
sidebarTitle: "MRR Algorithm"
description: Learn about LanceDB's Mean Reciprocal Rank (MRR) reranker for combining and reranking results from hybrid and multi-vector searches.

---

import { PyRerankingMrrUsage } from '/snippets/integrations.mdx';

# Mean Reciprocal Rank Reranker

The Mean Reciprocal Rank (MRR) reranker combines results from multiple ranking systems by using each document's **rank position** (not its raw score). For each ranking system, a document receives a reciprocal-rank score of:

$$
\text{RR} = \frac{1}{\text{rank}}
$$

MRR then aggregates these reciprocal ranks to produce a final `_relevance_score` used to sort results.

Algorithm reference: https://en.wikipedia.org/wiki/Mean_reciprocal_rank

> **Note:** Supported query types – Hybrid search and multi-vector search.

<CodeGroup>
  <CodeBlock filename="Python" language="Python" icon="python">
    {PyRerankingMrrUsage}
  </CodeBlock>
</CodeGroup>

Accepted Arguments
----------------
| Argument | Type | Default | Description |
| --- | --- | --- | --- |
| `weight_vector` | `float` | `0.5` | Weight for vector search results (0.0 to 1.0). Used for hybrid reranking. |
| `weight_fts` | `float` | `0.5` | Weight for FTS search results (0.0 to 1.0). Used for hybrid reranking. Note: `weight_vector + weight_fts` must equal `1.0`. |
| `return_score` | str | `"relevance"` | Options are "relevance" or "all". The type of score to return. If "relevance", will return only the `_relevance_score`. If "all", will return all scores from the vector and FTS search along with the relevance score. |

## Supported Scores for each query type
You can specify the type of scores you want the reranker to return. The following are the supported scores for each query type:

### Hybrid Search
|`return_score`| Status | Description |
| --- | --- | --- |
|`return_score`| Status | Description |
| --- | --- | --- |
| `relevance` | ✅ Supported | Returned rows only have the `_relevance_score` column. |
| `all` | ✅ Supported | Returned rows have vector(`_distance`) and FTS(`_score`) along with Hybrid Search score(`_relevance_score`). |

### Multi-vector Search
|`return_score`| Status | Description |
| --- | --- | --- |
| `relevance` | ✅ Supported | Returned rows only have the `_relevance_score` column. |
| `all` | ✅ Supported | Returned rows include the original columns from each vector search result (for example `_distance` if present) along with `_relevance_score`. |
